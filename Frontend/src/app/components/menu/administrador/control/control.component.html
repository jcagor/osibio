<div class="tabs">
    <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start">
        <mat-tab label="Investigadores">
            <section class="example-container mat-elevation-z8" tabindex="0">
                <table mat-table [dataSource]="dataSource">
                    <!-- Nombre Column -->
                    <ng-container matColumnDef="nombre">
                        <th mat-header-cell *matHeaderCellDef> Nombre </th>
                        <td mat-cell *matCellDef="let usuario"> {{ usuario.nombre }} {{ usuario.apellidos }}  </td>
                    </ng-container>
                    <!-- Rol Column -->
                    <ng-container matColumnDef="rolinvestigador">
                        <th mat-header-cell *matHeaderCellDef> Rol</th>
                        <td mat-cell *matCellDef="let usuario">
                            <button mat-icon-button color="primary" (click)="cambiarRol(usuario, 'Investigador')" *ngIf="usuario.rolinvestigador !== 'Investigador'">
                                <mat-icon>touch_app</mat-icon>
                            </button>
                            <button mat-icon-button color="primary" (click)="cambiarRol(usuario, 'Administrador')" *ngIf="usuario.rolinvestigador !== 'Administrador'">
                                <mat-icon>touch_app</mat-icon>
                            </button>
                            {{ usuario.rolinvestigador }}
                        </td>
                    </ng-container>
                    <!-- Estado Column -->
                    <ng-container matColumnDef="estado">
                        <th mat-header-cell *matHeaderCellDef> Estado </th>
                        <td mat-cell *matCellDef="let usuario">
                            <mat-slide-toggle [(ngModel)]="usuario.estado" (toggleChange)="cambiarEstadoInvestigador(usuario)"></mat-slide-toggle>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="created_at">
                        <th mat-header-cell *matHeaderCellDef> Fecha Creación </th>
                        <td mat-cell *matCellDef="let usuario"> {{ usuario.created_at | date:'medium' }} </td>
                    </ng-container>
                    <ng-container matColumnDef="updated_at">
                        <th mat-header-cell *matHeaderCellDef> Fecha Modificación </th>
                        <td mat-cell *matCellDef="let usuario"> {{ usuario.updated_at | date:'medium'  }} </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="['nombre', 'rolinvestigador', 'estado','updated_at','created_at']; sticky: true"></tr>
                    <tr mat-row *matRowDef="let usuario; columns: ['nombre', 'rolinvestigador', 'estado','updated_at','created_at'];"></tr>
                </table>
            </section>
        </mat-tab>
        <mat-tab label="Proyectos">
            <section class="example-container mat-elevation-z8" tabindex="0">
                <table mat-table [dataSource]="dataSourceProyecto">
                    <!-- Nombre Column -->
                    <ng-container matColumnDef="codigo">
                        <th mat-header-cell *matHeaderCellDef> Código </th>
                        <td mat-cell *matCellDef="let proyecto"> {{ proyecto.codigo }} - {{ proyecto.titulo }} </td>
                    </ng-container>
                    <!-- Lider Column -->
                    <ng-container matColumnDef="lider">
                        <th mat-header-cell *matHeaderCellDef> Lider </th>
                        <td mat-cell *matCellDef="let proyecto"> {{ proyecto.investigador}} </td>
                    </ng-container>
                    <!-- Estado Column -->
                    <ng-container matColumnDef="estado">
                        <th mat-header-cell *matHeaderCellDef> Estado </th>
                        <td mat-cell *matCellDef="let proyecto">
                            <mat-select [(value)]="proyecto.estadoProceso" panelClass="matRole" (selectionChange)="cambiarEstadoProyecto($event.value,proyecto)" >
                                <mat-option *ngFor="let data of estadosProceso" [value]="data">
                                    {{data}}
                                </mat-option>
                            </mat-select>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="created_at">
                        <th mat-header-cell *matHeaderCellDef> Fecha Creación </th>
                        <td mat-cell *matCellDef="let proyecto"> {{ proyecto.created_at | date:'medium' }} </td>
                    </ng-container>
                    <ng-container matColumnDef="updated_at">
                        <th mat-header-cell *matHeaderCellDef> Fecha Modificación </th>
                        <td mat-cell *matCellDef="let proyecto"> {{ proyecto.updated_at | date:'medium'  }} </td>
                    </ng-container>
                    <ng-container matColumnDef="accion">
                        <th mat-header-cell *matHeaderCellDef> Acción </th>
                        <td mat-cell *matCellDef="let proyecto">
                            <button  matTooltip="Notificar" matTooltipPosition="above" mat-icon-button color="primary" (click)="openDialogEntregableAdministrativo(proyecto, 'Proyecto')">
                                <mat-icon>notifications</mat-icon>
                            </button>
                            <button  matTooltip="Historial" matTooltipPosition="above" mat-icon-button color="warn" (click)="openDialogHistorialEntregableAdministrativo(proyecto, 'Proyecto')">
                                <mat-icon>history</mat-icon>
                            </button>
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="['codigo', 'lider', 'estado','updated_at','created_at','accion']; sticky: true"></tr>
                    <tr mat-row *matRowDef="let proyecto; columns: ['codigo', 'lider', 'estado','updated_at','created_at','accion'];"></tr>
                </table>
            </section>
        </mat-tab>
        <mat-tab label="Productos">
            <section class="example-container mat-elevation-z8" tabindex="0">
                <table mat-table [dataSource]="dataSource3">
                    <!-- Nombre Column -->
                    <ng-container matColumnDef="nombre">
                        <th mat-header-cell *matHeaderCellDef> Nombre </th>
                        <td mat-cell *matCellDef="let producto"> {{ producto.nombre }} </td>
                    </ng-container>
                    <!-- Lider Column -->
                    <ng-container matColumnDef="lider">
                        <th mat-header-cell *matHeaderCellDef> Lider </th>
                        <td mat-cell *matCellDef="let producto"> {{ producto.lider }} </td>
                    </ng-container>
                    <!-- Estado Column -->
                    <ng-container matColumnDef="estado">
                        <th mat-header-cell *matHeaderCellDef> Estado </th>
                        <td mat-cell *matCellDef="let producto"> {{ producto.estado }} </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="['nombre', 'lider', 'estado']; sticky: true"></tr>
                    <tr mat-row *matRowDef="let producto; columns: ['nombre', 'lider', 'estado'];"></tr>
                </table>
            </section>
        </mat-tab>
    </mat-tab-group>
</div>
